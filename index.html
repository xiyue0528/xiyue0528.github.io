
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unit 4 ç¯ä¿è¯æ±‡è®­ç»ƒç½‘ç«™</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .word-card {
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }
        .word-card.flipped {
            transform: rotateY(180deg);
        }
        .card-front, .card-back {
            backface-visibility: hidden;
            position: absolute;
            width: 100%;
            height: 100%;
        }
        .card-back {
            transform: rotateY(180deg);
        }
        .progress-bar {
            transition: width 0.3s ease;
        }
        @keyframes correct {
            0% { background-color: #10b981; }
            50% { background-color: #34d399; }
            100% { background-color: #10b981; }
        }
        @keyframes incorrect {
            0% { background-color: #ef4444; }
            50% { background-color: #f87171; }
            100% { background-color: #ef4444; }
        }
        .correct-animation {
            animation: correct 0.6s ease;
        }
        .incorrect-animation {
            animation: incorrect 0.6s ease;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-green-50 to-blue-50 min-h-screen">
    <nav class="bg-white shadow-lg mb-8">
        <div class="container mx-auto px-4 py-4">
            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold text-green-600">ğŸŒ Unit 4 ç¯ä¿è¯æ±‡è®­ç»ƒ</h1>
                <div class="flex space-x-4">
                    <button onclick="showMode('home')" class="nav-btn bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition">é¦–é¡µ</button>
                    <button onclick="showMode('stats')" class="nav-btn bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition">å­¦ä¹ ç»Ÿè®¡</button>
                </div>
            </div>
        </div>
    </nav>

    <div id="home-section" class="container mx-auto px-4">
        <div class="text-center mb-8">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">é€‰æ‹©ä½ çš„è®­ç»ƒæ¨¡å¼</h2>
            <p class="text-gray-600">ğŸ’¡ å»ºè®®æŒ‰é¡ºåºå®Œæˆè®­ç»ƒï¼Œå¾ªåºæ¸è¿›æŒæ¡è¯æ±‡</p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto">
            <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition">
                <div class="text-center">
                    <div class="text-4xl mb-4">ğŸ“š</div>
                    <h3 class="text-xl font-bold mb-2">è¯æ±‡åˆ†ç±»å­¦ä¹ </h3>
                    <p class="text-gray-600 mb-4">æŒ‰ä¸»é¢˜åˆ†ç±»å­¦ä¹ è¯æ±‡ï¼Œå»ºç«‹çŸ¥è¯†ä½“ç³»</p>
                    <button onclick="showMode('category')" class="w-full bg-blue-500 text-white py-2 rounded-lg hover:bg-blue-600 transition">å¼€å§‹å­¦ä¹ </button>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition">
                <div class="text-center">
                    <div class="text-4xl mb-4">ğŸ´</div>
                    <h3 class="text-xl font-bold mb-2">å•è¯å¡ç‰‡è®°å¿†</h3>
                    <p class="text-gray-600 mb-4">ç¿»è½¬å¡ç‰‡è®°å¿†å•è¯ï¼ŒåŠ æ·±å°è±¡</p>
                    <button onclick="showMode('flashcard')" class="w-full bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 transition">å¼€å§‹è®°å¿†</button>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition">
                <div class="text-center">
                    <div class="text-4xl mb-4">ğŸ“</div>
                    <h3 class="text-xl font-bold mb-2">é€‰æ‹©é¢˜æµ‹è¯•</h3>
                    <p class="text-gray-600 mb-4">å¤šé€‰é¢˜å½¢å¼æµ‹è¯•è¯æ±‡æŒæ¡ç¨‹åº¦</p>
                    <button onclick="showMode('quiz')" class="w-full bg-purple-500 text-white py-2 rounded-lg hover:bg-purple-600 transition">å¼€å§‹æµ‹è¯•</button>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition">
                <div class="text-center">
                    <div class="text-4xl mb-4">ğŸ”Š</div>
                    <h3 class="text-xl font-bold mb-2">å¬éŸ³é€‰è¯</h3>
                    <p class="text-gray-600 mb-4">å¬å‘éŸ³é€‰æ‹©æ­£ç¡®å•è¯ï¼Œè®­ç»ƒå¬åŠ›</p>
                    <button onclick="showMode('listening')" class="w-full bg-red-500 text-white py-2 rounded-lg hover:bg-red-600 transition">å¼€å§‹å¬éŸ³</button>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition">
                <div class="text-center">
                    <div class="text-4xl mb-4">âœï¸</div>
                    <h3 class="text-xl font-bold mb-2">æ‹¼å†™ç»ƒä¹ </h3>
                    <p class="text-gray-600 mb-4">æ ¹æ®ä¸­æ–‡æ„æ€æ‹¼å†™è‹±æ–‡å•è¯</p>
                    <button onclick="showMode('spelling')" class="w-full bg-yellow-500 text-white py-2 rounded-lg hover:bg-yellow-600 transition">å¼€å§‹æ‹¼å†™</button>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition">
                <div class="text-center">
                    <div class="text-4xl mb-4">ğŸ’¬</div>
                    <h3 class="text-xl font-bold mb-2">æƒ…æ™¯å¯¹è¯</h3>
                    <p class="text-gray-600 mb-4">åœ¨å¯¹è¯ä¸­å­¦ä¹ å•è¯ä½¿ç”¨æ–¹æ³•</p>
                    <button onclick="showMode('dialogue')" class="w-full bg-indigo-500 text-white py-2 rounded-lg hover:bg-indigo-600 transition">å¼€å§‹å¯¹è¯</button>
                </div>
            </div>
        </div>
    </div>

    <div id="category-section" class="container mx-auto px-4 hidden">
        <div class="max-w-4xl mx-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ğŸ“š è¯æ±‡åˆ†ç±»å­¦ä¹ </h2>
                <button onclick="showMode('home')" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">è¿”å›é¦–é¡µ</button>
            </div>
            
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8">
                <button onclick="showCategory('weather')" class="category-btn bg-red-100 hover:bg-red-200 p-4 rounded-lg border-2 border-transparent hover:border-red-300 transition">
                    <div class="text-2xl mb-2">ğŸŒªï¸</div>
                    <div class="font-semibold">å¤©æ°”ç¾å®³</div>
                </button>
                <button onclick="showCategory('energy')" class="category-btn bg-blue-100 hover:bg-blue-200 p-4 rounded-lg border-2 border-transparent hover:border-blue-300 transition">
                    <div class="text-2xl mb-2">âš¡</div>
                    <div class="font-semibold">èƒ½æºç±»</div>
                </button>
                <button onclick="showCategory('environment')" class="category-btn bg-green-100 hover:bg-green-200 p-4 rounded-lg border-2 border-transparent hover:border-green-300 transition">
                    <div class="text-2xl mb-2">â™»ï¸</div>
                    <div class="font-semibold">ç¯ä¿è¡ŒåŠ¨</div>
                </button>
                <button onclick="showCategory('geography')" class="category-btn bg-yellow-100 hover:bg-yellow-200 p-4 rounded-lg border-2 border-transparent hover:border-yellow-300 transition">
                    <div class="text-2xl mb-2">ğŸŒ</div>
                    <div class="font-semibold">åœ°ç†ç¯å¢ƒ</div>
                </button>
            </div>

            <div id="category-words" class="bg-white rounded-xl shadow-lg p-6">
                <p class="text-center text-gray-500">è¯·é€‰æ‹©ä¸€ä¸ªåˆ†ç±»å¼€å§‹å­¦ä¹ </p>
            </div>
        </div>
    </div>

    <div id="flashcard-section" class="container mx-auto px-4 hidden">
        <div class="max-w-2xl mx-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ğŸ´ å•è¯å¡ç‰‡è®°å¿†</h2>
                <button onclick="showMode('home')" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">è¿”å›é¦–é¡µ</button>
            </div>

            <div class="mb-6">
                <div class="flex justify-between mb-2">
                    <span class="text-sm text-gray-600">è¿›åº¦</span>
                    <span class="text-sm text-gray-600" id="flashcard-progress">0/0</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="progress-bar bg-blue-500 h-2 rounded-full" id="flashcard-bar" style="width: 0%"></div>
                </div>
            </div>

            <div class="relative h-80 mb-6">
                <div id="flashcard" class="word-card w-full h-full cursor-pointer">
                    <div class="card-front bg-gradient-to-br from-blue-400 to-blue-600 text-white rounded-xl shadow-lg flex items-center justify-center text-center p-8">
                        <div>
                            <div class="text-3xl font-bold mb-4" id="word-english">ç‚¹å‡»å¼€å§‹</div>
                            <div class="text-sm opacity-75" id="word-phonetic"></div>
                        </div>
                    </div>
                    <div class="card-back bg-gradient-to-br from-green-400 to-green-600 text-white rounded-xl shadow-lg flex items-center justify-center text-center p-8">
                        <div>
                            <div class="text-2xl font-bold mb-4" id="word-chinese">ç‚¹å‡»ç¿»è½¬</div>
                            <div class="text-sm opacity-75" id="word-example"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="flex justify-center space-x-4">
                <button onclick="previousCard()" class="bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition">ä¸Šä¸€ä¸ª</button>
                <button onclick="flipCard()" class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition">ç¿»è½¬</button>
                <button onclick="nextCard()" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition">ä¸‹ä¸€ä¸ª</button>
            </div>
        </div>
    </div>

    <div id="quiz-section" class="container mx-auto px-4 hidden">
        <div class="max-w-3xl mx-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ğŸ“ é€‰æ‹©é¢˜æµ‹è¯•</h2>
                <button onclick="showMode('home')" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">è¿”å›é¦–é¡µ</button>
            </div>

            <div class="flex justify-between mb-6">
                <div class="bg-white rounded-lg p-4 shadow">
                    <div class="text-sm text-gray-600">é¢˜ç›®è¿›åº¦</div>
                    <div class="text-2xl font-bold" id="quiz-progress">0/10</div>
                </div>
                <div class="bg-white rounded-lg p-4 shadow">
                    <div class="text-sm text-gray-600">æ­£ç¡®ç‡</div>
                    <div class="text-2xl font-bold text-green-600" id="quiz-score">0%</div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
                <div class="text-xl font-semibold mb-6" id="quiz-question">å‡†å¤‡å¼€å§‹æµ‹è¯•...</div>
                <div class="space-y-3" id="quiz-options"></div>
            </div>

            <div class="flex justify-center space-x-4">
                <button onclick="startQuiz()" id="start-quiz-btn" class="bg-purple-500 text-white px-8 py-3 rounded-lg hover:bg-purple-600 transition font-semibold">å¼€å§‹æµ‹è¯•</button>
                <button onclick="nextQuiz()" id="next-quiz-btn" class="bg-green-500 text-white px-8 py-3 rounded-lg hover:bg-green-600 transition font-semibold hidden">ä¸‹ä¸€é¢˜</button>
            </div>
        </div>
    </div>

    <div id="spelling-section" class="container mx-auto px-4 hidden">
        <div class="max-w-2xl mx-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-gray-800">âœï¸ æ‹¼å†™ç»ƒä¹ </h2>
                <button onclick="showMode('home')" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">è¿”å›é¦–é¡µ</button>
            </div>

            <div class="mb-6">
                <div class="flex justify-between mb-2">
                    <span class="text-sm text-gray-600">æ‹¼å†™è¿›åº¦</span>
                    <span class="text-sm text-gray-600" id="spelling-progress">0/20</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="progress-bar bg-yellow-500 h-2 rounded-full" id="spelling-bar" style="width: 0%"></div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
                <div class="text-center mb-6">
                    <div class="text-lg text-gray-600 mb-2">è¯·æ‹¼å†™ä¸‹é¢å•è¯ï¼š</div>
                    <div class="text-3xl font-bold text-blue-600" id="spelling-chinese">å¼€å§‹ç»ƒä¹ </div>
                    <div class="text-sm text-gray-500 mt-2" id="spelling-hint"></div>
                </div>
                
                <div class="mb-6">
                    <input type="text" id="spelling-input" class="w-full p-4 text-xl border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none text-center" placeholder="åœ¨è¿™é‡Œè¾“å…¥è‹±æ–‡å•è¯..." autocomplete="off">
                </div>

                <div class="text-center">
                    <button onclick="checkSpelling()" id="check-spelling-btn" class="bg-blue-500 text-white px-8 py-3 rounded-lg hover:bg-blue-600 transition font-semibold">æ£€æŸ¥æ‹¼å†™</button>
                    <button onclick="nextSpelling()" id="next-spelling-btn" class="bg-green-500 text-white px-8 py-3 rounded-lg hover:bg-green-600 transition font-semibold hidden">ä¸‹ä¸€é¢˜</button>
                </div>

                <div id="spelling-result" class="mt-4 text-center hidden">
                    <div id="spelling-feedback" class="text-lg font-semibold mb-2"></div>
                    <div id="spelling-correct" class="text-sm text-gray-600"></div>
                </div>
            </div>
        </div>
    </div>

    <div id="listening-section" class="container mx-auto px-4 hidden">
        <div class="max-w-2xl mx-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ğŸ”Š å¬éŸ³é€‰è¯</h2>
                <button onclick="showMode('home')" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">è¿”å›é¦–é¡µ</button>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-8 text-center">
                <p class="text-gray-600">å¬éŸ³é€‰è¯åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
            </div>
        </div>
    </div>

    <div id="dialogue-section" class="container mx-auto px-4 hidden">
        <div class="max-w-2xl mx-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ğŸ’¬ æƒ…æ™¯å¯¹è¯</h2>
                <button onclick="showMode('home')" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">è¿”å›é¦–é¡µ</button>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-8 text-center">
                <p class="text-gray-600">æƒ…æ™¯å¯¹è¯åŠŸèƒ½å¼€å‘ä¸­ï¼Œæ•¬è¯·æœŸå¾…ï¼</p>
            </div>
        </div>
    </div>

    <div id="stats-section" class="container mx-auto px-4 hidden">
        <div class="max-w-4xl mx-auto">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl font-bold text-gray-800">ğŸ“Š å­¦ä¹ ç»Ÿè®¡</h2>
                <button onclick="showMode('home')" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition">è¿”å›é¦–é¡µ</button>
            </div>

            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-blue-600" id="total-learned">32</div>
                    <div class="text-gray-600">å·²å­¦ä¹ å•è¯</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-green-600" id="quiz-accuracy">0%</div>
                    <div class="text-gray-600">æµ‹è¯•æ­£ç¡®ç‡</div>
                </div>
                <div class="bg-white rounded-xl shadow-lg p-6 text-center">
                    <div class="text-3xl font-bold text-purple-600" id="study-days">1</div>
                    <div class="text-gray-600">è¿ç»­å­¦ä¹ å¤©æ•°</div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-6">
                <h3 class="text-xl font-bold mb-4">å­¦ä¹ å»ºè®®</h3>
                <div id="study-suggestions" class="space-y-2 text-gray-600">
                    <p>â€¢ å»ºè®®æ¯å¤©å­¦ä¹ 15-20åˆ†é’Ÿ</p>
                    <p>â€¢ é‡ç‚¹å¤ä¹ é”™è¯¯ç‡é«˜çš„å•è¯</p>
                    <p>â€¢ å°è¯•åœ¨çœŸå®æƒ…å¢ƒä¸­ä½¿ç”¨å­¦è¿‡çš„å•è¯</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const vocabulary = [
            {word: "hurricane", phonetic: "[ËˆhÊŒrÉªkÉ™n]", chinese: "é£“é£", category: "weather", example: "The hurricane caused severe damage."},
            {word: "flood", phonetic: "[flÊŒd]", chinese: "æ´ªç¾", category: "weather", example: "The flood destroyed many homes."},
            {word: "cyclone", phonetic: "[ËˆsaÉªklÉ™ÊŠn]", chinese: "æ°”æ—‹", category: "weather", example: "The cyclone brought heavy rain."},
            {word: "disaster", phonetic: "[dÉªËˆzÉ‘ËstÉ™(r)]", chinese: "ç¾éš¾", category: "weather", example: "We must prevent this disaster."},
            {word: "drown", phonetic: "[draÊŠn]", chinese: "æ·¹æ²¡", category: "weather", example: "The city may drown in flood."},
            {word: "solar", phonetic: "[ËˆsÉ™ÊŠlÉ™(r)]", chinese: "å¤ªé˜³çš„", category: "energy", example: "Solar energy is clean."},
            {word: "nuclear", phonetic: "[ËˆnjuËklÉªÉ™(r)]", chinese: "æ ¸èƒ½çš„", category: "energy", example: "Nuclear power is controversial."},
            {word: "hydroelectric", phonetic: "[ËŒhaÉªdrÉ™ÊŠÉªËˆlektrÉªk]", chinese: "æ°´åŠ›å‘ç”µçš„", category: "energy", example: "Hydroelectric dams generate power."},
            {word: "alternative", phonetic: "[É”ËlËˆtÉœËnÉ™tÉªv]", chinese: "æ›¿ä»£çš„", category: "energy", example: "We need alternative energy sources."},
            {word: "energy", phonetic: "[ËˆenÉ™dÊ’Éª]", chinese: "èƒ½æº", category: "energy", example: "Save energy at home."},
            {word: "power", phonetic: "[ËˆpaÊŠÉ™(r)]", chinese: "ç”µåŠ›", category: "energy", example: "The power went out."},
            {word: "fuel", phonetic: "[fjÊŠÉ™l]", chinese: "ç‡ƒæ–™", category: "energy", example: "Cars need fuel to run."},
            {word: "reuse", phonetic: "[riËËˆjuËz]", chinese: "å†ä½¿ç”¨", category: "environment", example: "We should reuse plastic bags."},
            {word: "packaging", phonetic: "[ËˆpÃ¦kÉªdÊ’ÉªÅ‹]", chinese: "åŒ…è£…", category: "environment", example: "Reduce unnecessary packaging."},
            {word: "garbage", phonetic: "[ËˆgÉ‘ËbÉªdÊ’]", chinese: "åƒåœ¾", category: "environment", example: "Put garbage in the bin."},
            {word: "aluminum", phonetic: "[É™ËˆlÊŠmÉªnÉ™m]", chinese: "é“", category: "environment", example: "Aluminum cans are recyclable."},
            {word: "plastic", phonetic: "[ËˆplÃ¦stÉªk]", chinese: "å¡‘æ–™", category: "environment", example: "Plastic pollution is serious."},
            {word: "container", phonetic: "[kÉ™nËˆteÉªnÉ™]", chinese: "å®¹å™¨", category: "environment", example: "Use glass containers."},
            {word: "throwaway", phonetic: "[ËˆÎ¸rÉ™ÊŠÉ™weÉª]", chinese: "ä¸€æ¬¡æ€§çš„", category: "environment", example: "Avoid throwaway products."},
            {word: "ecological", phonetic: "[ËŒiËkÉ™ËˆlÉ’dÊ’ÉªkÉ™l]", chinese: "ç”Ÿæ€çš„", category: "environment", example: "Ecological balance is important."},
            {word: "atmosphere", phonetic: "[ËˆÃ¦tmÉ™sfÉªÉ™]", chinese: "å¤§æ°”", category: "geography", example: "The atmosphere protects us."},
            {word: "climate", phonetic: "[ËˆklaÉªmÉªt]", chinese: "æ°”å€™", category: "geography", example: "Climate change affects everyone."},
            {word: "desert", phonetic: "[ËˆdezÉ™t]", chinese: "æ²™æ¼ ", category: "geography", example: "The Sahara is a large desert."},
            {word: "coast", phonetic: "[kÉ™ÊŠst]", chinese: "æµ·å²¸", category: "geography", example: "We live near the coast."},
            {word: "Netherlands", phonetic: "[ËˆneÃ°É™lÉ™ndz]", chinese: "è·å…°", category: "geography", example: "Netherlands is below sea level."},
            {word: "Spain", phonetic: "[speÉªn]", chinese: "è¥¿ç­ç‰™", category: "geography", example: "Spain is in Europe."},
            {word: "Greece", phonetic: "[griËs]", chinese: "å¸Œè…Š", category: "geography", example: "Greece has many islands."},
            {word: "critical", phonetic: "[ËˆkrÉªtÉªkÉ™l]", chinese: "å…³é”®çš„", category: "general", example: "This is a critical moment."},
            {word: "gradually", phonetic: "[ËˆgrÃ¦dÊ’uÉ™lÉª]", chinese: "é€æ¸åœ°", category: "general", example: "Things change gradually."},
            {word: "announce", phonetic: "[É™ËˆnaÊŠns]", chinese: "å®£å¸ƒ", category: "general", example: "They announced the results."},
            {word: "shock", phonetic: "[ÊƒÉ’k]", chinese: "éœ‡æƒŠ", category: "general", example: "The news shocked everyone."},
            {word: "rare", phonetic: "[reÉ™]", chinese: "ç¨€æœ‰çš„", category: "general", example: "This bird is very rare."}
        ];

        let currentMode = 'home';
        let currentCardIndex = 0;
        let currentQuizIndex = 0;
        let currentSpellingIndex = 0;
        let quizScore = 0;
        let quizQuestions = [];
        let spellingWords = [];
        let isCardFlipped = false;

        document.addEventListener('DOMContentLoaded', function() {
            showMode('home');
        });

        function showMode(mode) {
            document.querySelectorAll('[id$="-section"]').forEach(section => {
                section.classList.add('hidden');
            });
            
            document.getElementById(mode + '-section').classList.remove('hidden');
            currentMode = mode;

            if (mode === 'flashcard') {
                initFlashcards();
            } else if (mode === 'spelling') {
                initSpelling();
            }
        }

        function showCategory(category) {
            const categoryWords = vocabulary.filter(word => word.category === category);
            const wordsContainer = document.getElementById('category-words');
            
            const categoryTitles = {
                weather: 'ğŸŒªï¸ å¤©æ°”ç¾å®³ç±»è¯æ±‡',
                energy: 'âš¡ èƒ½æºç±»è¯æ±‡',
                environment: 'â™»ï¸ ç¯ä¿è¡ŒåŠ¨ç±»è¯æ±‡',
                geography: 'ğŸŒ åœ°ç†ç¯å¢ƒç±»è¯æ±‡'
            };

            let html = '<h3 class="text-xl font-bold mb-6">' + categoryTitles[category] + '</h3>';
            html += '<div class="grid md:grid-cols-2 gap-4">';
            
            categoryWords.forEach(word => {
                html += '<div class="border-2 border-gray-200 rounded-lg p-4 hover:border-blue-300 hover:bg-blue-50 transition">';
                html += '<div class="flex items-center justify-between">';
                html += '<div>';
                html += '<div class="text-lg font-bold text-blue-600">' + word.word + '</div>';
                html += '<div class="text-sm text-gray-500">' + word.phonetic + '</div>';
                html += '<div class="text-gray-700">' + word.chinese + '</div>';
                html += '</div>';
                html += '<button onclick="playWord(\'' + word.word + '\')" class="text-blue-500 hover:text-blue-700 text-xl">ğŸ”Š</button>';
                html += '</div>';
                html += '<div class="mt-2 text-sm text-gray-600 italic">' + word.example + '</div>';
                html += '</div>';
            });
            
            html += '</div>';
            wordsContainer.innerHTML = html;
        }

        function initFlashcards() {
            currentCardIndex = 0;
            isCardFlipped = false;
            updateFlashcard();
        }

        function updateFlashcard() {
            if (vocabulary.length === 0) return;
            
            const word = vocabulary[currentCardIndex];
            document.getElementById('word-english').textContent = word.word;
            document.getElementById('word-phonetic').textContent = word.phonetic;
            document.getElementById('word-chinese').textContent = word.chinese;
            document.getElementById('word-example').textContent = word.example;
            
            document.getElementById('flashcard-progress').textContent = (currentCardIndex + 1) + '/' + vocabulary.length;
            document.getElementById('flashcard-bar').style.width = ((currentCardIndex + 1) / vocabulary.length) * 100 + '%';
            
            document.getElementById('flashcard').classList.remove('flipped');
            isCardFlipped = false;
        }

        function flipCard() {
            const card = document.getElementById('flashcard');
            card.classList.toggle('flipped');
            isCardFlipped = !isCardFlipped;
        }

        function nextCard() {
            currentCardIndex = (currentCardIndex + 1) % vocabulary.length;
            updateFlashcard();
        }

        function previousCard() {
            currentCardIndex = currentCardIndex === 0 ? vocabulary.length - 1 : currentCardIndex - 1;
            updateFlashcard();
        }

        function startQuiz() {
            currentQuizIndex = 0;
            quizScore = 0;
            quizQuestions = generateQuizQuestions(10);
            document.getElementById('start-quiz-btn').classList.add('hidden');
            document.getElementById('next-quiz-btn').classList.add('hidden');
            showQuizQuestion();
        }

        function generateQuizQuestions(count) {
            const shuffled = vocabulary.slice().sort(function() { return 0.5 - Math.random(); });
            return shuffled.slice(0, count).map(function(word) {
                const options = [word.chinese];
                const otherWords = vocabulary.filter(function(w) { return w.word !== word.word; });
                
                while (options.length < 4) {
                    const randomWord = otherWords[Math.floor(Math.random() * otherWords.length)];
                    if (options.indexOf(randomWord.chinese) === -1) {
                        options.push(randomWord.chinese);
                    }
                }
                
                return {
                    word: word.word,
                    phonetic: word.phonetic,
                    correct: word.chinese,
                    options: options.sort(function() { return 0.5 - Math.random(); })
                };
            });
        }

        function showQuizQuestion() {
            if (currentQuizIndex >= quizQuestions.length) {
                showQuizResult();
                return;
            }

            const question = quizQuestions[currentQuizIndex];
            document.getElementById('quiz-question').innerHTML = 
                '<div class="text-center">' +
                '<div class="text-2xl font-bold text-blue-600 mb-2">' + question.word + '</div>' +
                '<div class="text-sm text-gray-500 mb-4">' + question.phonetic + '</div>' +
                '<div class="text-lg">è¿™ä¸ªå•è¯çš„ä¸­æ–‡æ„æ€æ˜¯ï¼š</div>' +
                '</div>';
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach(function(option) {
                const button = document.createElement('button');
                button.className = 'w-full p-4 text-left border-2 border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 transition';
                button.textContent = option;
                button.onclick = function() { selectQuizOption(button, option, question.correct); };
                optionsContainer.appendChild(button);
            });

            document.getElementById('quiz-progress').textContent = (currentQuizIndex + 1) + '/' + quizQuestions.length;
        }

        function selectQuizOption(button, selected, correct) {
            const allButtons = document.querySelectorAll('#quiz-options button');
            allButtons.forEach(function(btn) {
                btn.disabled = true;
                if (btn.textContent === correct) {
                    btn.classList.add('bg-green-500', 'text-white', 'border-green-500');
                } else if (btn === button && selected !== correct) {
                    btn.classList.add('bg-red-500', 'text-white', 'border-red-500');
                }
            });

            if (selected === correct) {
                quizScore++;
                button.classList.add('correct-animation');
            } else {
                button.classList.add('incorrect-animation');
            }

            const accuracy = Math.round((quizScore / (currentQuizIndex + 1)) * 100);
            document.getElementById('quiz-score').textContent = accuracy + '%';

            setTimeout(function() {
                document.getElementById('next-quiz-btn').classList.remove('hidden');
            }, 1000);
        }

        function nextQuiz() {
            currentQuizIndex++;
            document.getElementById('next-quiz-btn').classList.add('hidden');
            showQuizQuestion();
        }

        function showQuizResult() {
            const accuracy = Math.round((quizScore / quizQuestions.length) * 100);
            document.getElementById('quiz-question').innerHTML = 
                '<div class="text-center">' +
                '<div class="text-3xl mb-4">ğŸ‰</div>' +
                '<div class="text-2xl font-bold mb-4">æµ‹è¯•å®Œæˆï¼</div>' +
                '<div class="text-lg">æ­£ç¡®ç‡: <span class="text-green-600 font-bold">' + accuracy + '%</span></div>' +
                '<div class="text-lg">ç­”å¯¹: ' + quizScore + '/' + quizQuestions.length + ' é¢˜</div>' +
                '</div>';
            document.getElementById('quiz-options').innerHTML = 
                '<div class="text-center mt-4">' +
                '<button onclick="startQuiz()" class="bg-purple-500 text-white px-8 py-3 rounded-lg hover:bg-purple-600 transition font-semibold mr-4">é‡æ–°æµ‹è¯•</button>' +
                '<button onclick="showMode(\'home\')" class="bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 transition font-semibold">è¿”å›é¦–é¡µ</button>' +
                '</div>';
        }

        function initSpelling() {
            currentSpellingIndex = 0;
            spellingWords = vocabulary.slice().sort(function() { return 0.5 - Math.random(); }).slice(0, 20);
            showSpellingQuestion();
        }

        function showSpellingQuestion() {
            if (currentSpellingIndex >= spellingWords.length) {
                showSpellingResult();
                return;
            }

            const word = spellingWords[currentSpellingIndex];
            document.getElementById('spelling-chinese').textContent = word.chinese;
            document.getElementById('spelling-hint').textContent = 'æç¤º: ' + word.word.length + ' ä¸ªå­—æ¯';
            document.getElementById('spelling-input').value = '';
            document.getElementById('spelling-result').classList.add('hidden');
            document.getElementById('check-spelling-btn').classList.remove('hidden');
            document.getElementById('next-spelling-btn').classList.add('hidden');

            document.getElementById('spelling-progress').textContent = (currentSpellingIndex + 1) + '/' + spellingWords.length;
            document.getElementById('spelling-bar').style.width = ((currentSpellingIndex + 1) / spellingWords.length) * 100 + '%';
        }

        function checkSpelling() {
            const userInput = document.getElementById('spelling-input').value.trim().toLowerCase();
            const correctWord = spellingWords[currentSpellingIndex].word.toLowerCase();
            const resultDiv = document.getElementById('spelling-result');
            const feedbackDiv = document.getElementById('spelling-feedback');
            const correctDiv = document.getElementById('spelling-correct');

            resultDiv.classList.remove('hidden');
            document.getElementById('check-spelling-btn').classList.add('hidden');
            document.getElementById('next-spelling-btn').classList.remove('hidden');

            if (userInput === correctWord) {
                feedbackDiv.textContent = 'âœ… æ‹¼å†™æ­£ç¡®ï¼';
                feedbackDiv.className = 'text-lg font-semibold mb-2 text-green-600';
                correctDiv.textContent = spellingWords[currentSpellingIndex].word + ' - ' + spellingWords[currentSpellingIndex].chinese;
            } else {
                feedbackDiv.textContent = 'âŒ æ‹¼å†™é”™è¯¯';
                feedbackDiv.className = 'text-lg font-semibold mb-2 text-red-600';
                correctDiv.innerHTML = 'æ­£ç¡®ç­”æ¡ˆ: <strong>' + spellingWords[currentSpellingIndex].word + '</strong> - ' + spellingWords[currentSpellingIndex].chinese;
            }

            playWord(spellingWords[currentSpellingIndex].word);
        }

        function nextSpelling() {
            currentSpellingIndex++;
            showSpellingQuestion();
        }

        function showSpellingResult() {
            document.getElementById('spelling-chinese').textContent = 'ğŸ‰ æ‹¼å†™ç»ƒä¹ å®Œæˆï¼';
            document.getElementById('spelling-hint').textContent = 'æ­å–œå®Œæˆæ‰€æœ‰å•è¯çš„æ‹¼å†™ç»ƒä¹ ';
            document.getElementById('spelling-input').style.display = 'none';
            document.getElementById('check-spelling-btn').style.display = 'none';
            document.getElementById('next-spelling-btn').innerHTML = 'è¿”å›é¦–é¡µ';
            document.getElementById('next-spelling-btn').onclick = function() { showMode('home'); };
        }

        function playWord(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'en-US';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            const flashcard = document.getElementById('flashcard');
            if (flashcard) {
                flashcard.addEventListener('click', flipCard);
            }
        });

        document.addEventListener('keydown', function(e) {
            if (currentMode === 'flashcard') {
                if (e.code === 'Space') {
                    e.preventDefault();
                    flipCard();
                } else if (e.code === 'ArrowLeft') {
                    previousCard();
                } else if (e.code === 'ArrowRight') {
                    nextCard();
                }
            } else if (currentMode === 'spelling') {
                if (e.code === 'Enter') {
                    const checkBtn = document.getElementById('check-spelling-btn');
                    const nextBtn = document.getElementById('next-spelling-btn');
                    if (!checkBtn.classList.contains('hidden')) {
                        checkSpelling();
                    } else if (!nextBtn.classList.contains('hidden')) {
                        nextSpelling();
                    }
                }
            }
        });
    </script>
</body>
</html>
